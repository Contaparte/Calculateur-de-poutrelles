<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculateur Poutrelles Versa-Lam® 2.0E</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            color: #333;
        }

        .header {
            background-color: #8B4513;
            color: white;
            text-align: center;
            padding: 20px;
            font-size: 28px;
            font-weight: bold;
        }

        .tabs {
            display: flex;
            background-color: #ddd;
            border-bottom: 2px solid #8B4513;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background-color: #ddd;
            cursor: pointer;
            border: none;
            font-size: 16px;
            font-weight: bold;
            transition: background-color 0.3s;
        }

        .tab.active {
            background-color: #8B4513;
            color: white;
        }

        .tab:hover:not(.active) {
            background-color: #bbb;
        }

        .tab-content {
            display: none;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .tab-content.active {
            display: block;
        }

        .calculator-container {
            display: flex;
            gap: 20px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .parameters-panel {
            flex: 1;
            background-color: #f8f8f8;
            padding: 20px;
            border-right: 2px solid #ddd;
        }

        .results-panel {
            flex: 1;
            padding: 20px;
            background-color: white;
        }

        .section-title {
            color: #8B4513;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            border-bottom: 2px solid #8B4513;
            padding-bottom: 5px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }

        .dimension-input {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .dimension-input input {
            width: 80px;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            text-align: center;
        }

        select, input[type="text"], input[type="number"] {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 14px;
        }

        select:focus, input:focus {
            outline: none;
            border-color: #8B4513;
            box-shadow: 0 0 5px rgba(139, 69, 19, 0.3);
        }

        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .checkbox-item input[type="checkbox"] {
            width: auto;
        }

        .result-box {
            background-color: #f0f8ff;
            border: 2px solid #8B4513;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .result-label {
            font-weight: bold;
            color: #8B4513;
            margin-bottom: 8px;
        }

        .result-value {
            font-size: 18px;
            font-weight: bold;
            color: #333;
        }

        .calculate-btn {
            background-color: #8B4513;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            margin-top: 20px;
            width: 100%;
            transition: background-color 0.3s;
        }

        .calculate-btn:hover {
            background-color: #6B3410;
        }

        .info-text {
            font-style: italic;
            color: #666;
            text-align: center;
            margin-top: 20px;
        }

        .stage-group {
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 10px;
            margin-bottom: 10px;
            background-color: white;
        }

        .stage-title {
            font-weight: bold;
            color: #8B4513;
            margin-bottom: 8px;
        }

        .load-inputs {
            display: flex;
            gap: 10px;
        }

        .load-inputs input {
            flex: 1;
        }
    </style>
</head>
<body>
    <div class="header">
        Calculateur Poutrelles Versa-Lam® 2.0E
    </div>

    <div class="tabs">
        <button class="tab active" onclick="showTab('poutrelles-i')">Poutrelles en I</button>
        <button class="tab" onclick="showTab('poutrelles-ajourees')">Poutrelles Ajourées</button>
    </div>

    <!-- Onglet Poutrelles en I -->
    <div id="poutrelles-i" class="tab-content active">
        <div class="calculator-container">
            <div class="parameters-panel">
                <div class="section-title">Paramètres de conception</div>
                
                <div class="form-group">
                    <label>Portée de la poutrelle</label>
                    <div class="dimension-input">
                        <input type="number" id="span-ft-i" placeholder="0" min="0">
                        <span>pi</span>
                        <input type="number" id="span-in-i" placeholder="0" min="0" max="11">
                        <span>po</span>
                    </div>
                </div>

                <div class="form-group">
                    <label>Nombre d'étages supportés</label>
                    <select id="floors-i">
                        <option value="1">1 étage</option>
                        <option value="2">2 étages</option>
                        <option value="3">3 étages</option>
                    </select>
                </div>

                <div id="tributary-widths-i">
                    <div class="stage-group">
                        <div class="stage-title">L.T. Étage 1</div>
                        <div class="dimension-input">
                            <input type="number" id="trib-1-ft-i" placeholder="0" min="0">
                            <span>pi</span>
                            <input type="number" id="trib-1-in-i" placeholder="0" min="0" max="11">
                            <span>po</span>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Charges (lb/pi.ca.)</label>
                    <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                        <div style="flex: 1;">
                            <label style="font-size: 12px;">Charge morte (CM)</label>
                            <select id="dead-load-i">
                                <option value="">Valeur CM</option>
                                <option value="10">10 lb/pi.ca.</option>
                                <option value="15">15 lb/pi.ca.</option>
                                <option value="20">20 lb/pi.ca.</option>
                                <option value="25">25 lb/pi.ca.</option>
                            </select>
                        </div>
                        <div style="flex: 1;">
                            <label style="font-size: 12px;">Charge vive (CV) (occupation)</label>
                            <select id="live-load-i">
                                <option value="">Valeur CV</option>
                                <option value="40">40 lb/pi.ca.</option>
                                <option value="50">50 lb/pi.ca.</option>
                                <option value="60">60 lb/pi.ca.</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <label style="font-size: 12px;">Charge vive (CV) (neige)</label>
                        <select id="snow-load-i">
                            <option value="">Valeur CV neige</option>
                            <option value="30">30 lb/pi.ca.</option>
                            <option value="40">40 lb/pi.ca.</option>
                            <option value="50">50 lb/pi.ca.</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label>Sous-plancher</label>
                    <div style="margin-bottom: 10px;">
                        <select id="subfloor-thickness-i">
                            <option value="5/8">⅝" ou 19⁄32"</option>
                            <option value="3/4">¾" ou 23⁄32"</option>
                        </select>
                    </div>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="radio" id="nailed-only-i" name="subfloor-attachment-i" value="nailed">
                            <label for="nailed-only-i">Cloué seulement</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="radio" id="glued-nailed-i" name="subfloor-attachment-i" value="glued-nailed" checked>
                            <label for="glued-nailed-i">Collé et cloué</label>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Type de portée</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="radio" id="simple-span-i" name="span-type-i" value="simple" checked>
                            <label for="simple-span-i">Portée simple</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="radio" id="multiple-span-i" name="span-type-i" value="multiple">
                            <label for="multiple-span-i">Portée multiple</label>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Plafond gypse</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="radio" id="no-gypsum-i" name="gypsum-i" value="no" checked>
                            <label for="no-gypsum-i">Sans panneau de gypse</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="radio" id="gypsum-half-i" name="gypsum-i" value="half">
                            <label for="gypsum-half-i">Avec panneau de gypse de ½"</label>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Contraintes dimensionnelles</label>
                    <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                        <div style="flex: 1;">
                            <label style="font-size: 12px;">Largeur max (po)</label>
                            <select id="max-width-i">
                                <option value="">Aucune contrainte</option>
                                <option value="12">12"</option>
                                <option value="16">16"</option>
                                <option value="19.2">19.2"</option>
                                <option value="24">24"</option>
                            </select>
                        </div>
                        <div style="flex: 1;">
                            <label style="font-size: 12px;">Hauteur max (po)</label>
                            <select id="max-height-i">
                                <option value="">Aucune contrainte</option>
                                <option value="9.5">9½"</option>
                                <option value="11.875">11⅞"</option>
                                <option value="14">14"</option>
                                <option value="16">16"</option>
                                <option value="18">18"</option>
                                <option value="20">20"</option>
                                <option value="22">22"</option>
                                <option value="24">24"</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Optimisation</label>
                    <select id="optimization-i">
                        <option value="fewer-plies">Favoriser moins de plis</option>
                        <option value="minimum-depth">Hauteur minimale</option>
                        <option value="standard">Standard</option>
                    </select>
                </div>

                <button class="calculate-btn" onclick="calculateI()">Calculer</button>
            </div>

            <div class="results-panel">
                <div class="section-title">Résultats de calcul</div>
                
                <div class="result-box">
                    <div class="result-label">Série recommandée</div>
                    <div class="result-value" id="series-result-i">-</div>
                </div>

                <div class="result-box">
                    <div class="result-label">Hauteur (po)</div>
                    <div class="result-value" id="height-result-i">-</div>
                </div>

                <div style="display: flex; gap: 15px;">
                    <div class="result-box" style="flex: 1;">
                        <div class="result-label">Espacement recommandé</div>
                        <div class="result-value" id="spacing-result-i">-</div>
                    </div>
                    <div class="result-box" style="flex: 1;">
                        <div class="result-label">Portée maximale</div>
                        <div class="result-value" id="max-span-result-i">-</div>
                    </div>
                </div>

                <div style="display: flex; gap: 15px;">
                    <div class="result-box" style="flex: 1;">
                        <div class="result-label">Charge totale non pondérée (Wt)</div>
                        <div class="result-value" id="total-load-result-i">-</div>
                    </div>
                    <div class="result-box" style="flex: 1;">
                        <div class="result-label">Charge totale pondérée (Wf)</div>
                        <div class="result-value" id="factored-load-result-i">-</div>
                    </div>
                </div>

                <div class="info-text">
                    Entrez les paramètres pour voir les options de poutrelles.
                </div>
            </div>
        </div>
    </div>

    <!-- Onglet Poutrelles Ajourées -->
    <div id="poutrelles-ajourees" class="tab-content">
        <div class="calculator-container">
            <div class="parameters-panel">
                <div class="section-title">Paramètres de conception</div>
                
                <div class="form-group">
                    <label>Portée libre</label>
                    <div class="dimension-input">
                        <input type="number" id="span-ft-a" placeholder="0" min="0">
                        <span>pi</span>
                        <input type="number" id="span-in-a" placeholder="0" min="0" max="11">
                        <span>po</span>
                    </div>
                </div>

                <div class="form-group">
                    <label>Charges (non pondérées)</label>
                    <div style="margin-bottom: 10px;">
                        <label style="font-size: 12px;">Charge vive (kPa)</label>
                        <select id="live-load-kpa">
                            <option value="1.9">1,9 kPa (40 lb/pi²)</option>
                            <option value="4.8">4,8 kPa (100 lb/pi²)</option>
                        </select>
                    </div>
                    <div>
                        <label style="font-size: 12px;">Charge permanente (kPa)</label>
                        <select id="dead-load-kpa">
                            <option value="0.70">0,70 kPa (15 lb/pi²)</option>
                            <option value="1.45">1,45 kPa (30 lb/pi²)</option>
                            <option value="1.70">1,70 kPa (35 lb/pi²)</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label>Espacement (c/c)</label>
                    <select id="spacing-a">
                        <option value="305">305 mm (12")</option>
                        <option value="406">406 mm (16")</option>
                        <option value="487">487 mm (19,2")</option>
                        <option value="610">610 mm (24")</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Série souhaitée</label>
                    <select id="series-a">
                        <option value="">Toutes les séries</option>
                        <option value="2x3-EPS">2x3 - EPS</option>
                        <option value="2x3-1650">2x3 - 1650</option>
                        <option value="2x3-2100">2x3 - 2100</option>
                        <option value="2x4-2100">2x4 - 2100</option>
                        <option value="2x4-2400">2x4 - 2400</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Hauteur minimale (mm)</label>
                    <select id="min-height-a">
                        <option value="">Aucune contrainte</option>
                        <option value="302">302 mm (11⅞")</option>
                        <option value="318">318 mm (12½")</option>
                        <option value="356">356 mm (14")</option>
                        <option value="406">406 mm (16")</option>
                        <option value="457">457 mm (18")</option>
                        <option value="508">508 mm (20")</option>
                        <option value="559">559 mm (22")</option>
                        <option value="610">610 mm (24")</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Hauteur maximale (mm)</label>
                    <select id="max-height-a">
                        <option value="">Aucune contrainte</option>
                        <option value="302">302 mm (11⅞")</option>
                        <option value="318">318 mm (12½")</option>
                        <option value="356">356 mm (14")</option>
                        <option value="406">406 mm (16")</option>
                        <option value="457">457 mm (18")</option>
                        <option value="508">508 mm (20")</option>
                        <option value="559">559 mm (22")</option>
                        <option value="610">610 mm (24")</option>
                    </select>
                </div>

                <button class="calculate-btn" onclick="calculateAjourees()">Calculer</button>
            </div>

            <div class="results-panel">
                <div class="section-title">Résultats de calcul</div>
                
                <div class="result-box">
                    <div class="result-label">Série recommandée</div>
                    <div class="result-value" id="series-result-a">-</div>
                </div>

                <div class="result-box">
                    <div class="result-label">Hauteur recommandée</div>
                    <div class="result-value" id="height-result-a">-</div>
                </div>

                <div style="display: flex; gap: 15px;">
                    <div class="result-box" style="flex: 1;">
                        <div class="result-label">Portée admissible</div>
                        <div class="result-value" id="allowable-span-a">-</div>
                    </div>
                    <div class="result-box" style="flex: 1;">
                        <div class="result-label">Ratio portée/demande</div>
                        <div class="result-value" id="span-ratio-a">-</div>
                    </div>
                </div>

                <div style="display: flex; gap: 15px;">
                    <div class="result-box" style="flex: 1;">
                        <div class="result-label">Charges appliquées</div>
                        <div class="result-value" id="applied-loads-a">-</div>
                    </div>
                    <div class="result-box" style="flex: 1;">
                        <div class="result-label">Statut</div>
                        <div class="result-value" id="status-a">-</div>
                    </div>
                </div>

                <div class="info-text">
                    Entrez les paramètres pour voir les options de poutrelles ajourées.
                </div>
            </div>
        </div>
    </div>

    <script>
        // Data tables for engineered joists (simplified from documents)
        const iJoistData = {
            "AJS140": {
                heights: [9.5, 11.875],
                spans: {
                    "5/8": {
                        "nailed": {
                            "simple": {
                                "no_gypsum": {
                                    9.5: {12: "14-7", 16: "13-7", 19.2: "13-1", 24: "n/d"},
                                    11.875: {12: "16-5", 16: "15-4", 19.2: "14-9", 24: "n/d"}
                                },
                                "half_gypsum": {
                                    9.5: {12: "15-0", 16: "14-0", 19.2: "13-5", 24: "n/d"},
                                    11.875: {12: "16-11", 16: "15-9", 19.2: "15-2", 24: "n/d"}
                                }
                            }
                        }
                    }
                }
            }
        };

        // Data tables for open web joists (from documents)
        const openWebJoistData = {
            "1.9_0.70": {
                "2x3-EPS": {302: {305: 5.90, 406: 5.08, 487: 4.60, 610: 4.05}},
                "2x3-1650": {302: {305: 6.58, 406: 6.00, 487: 5.45, 610: 4.80}},
                "2x3-2100": {302: {305: 6.83, 406: 6.38, 487: 6.05, 610: 5.60}},
                "2x4-2100": {302: {305: 7.35, 406: 6.85, 487: 6.53, 610: 6.15}},
                "2x4-2400": {302: {305: 7.53, 406: 7.03, 487: 6.70, 610: 6.30}}
            },
            "4.8_0.70": {
                "2x3-EPS": {302: {305: 4.02, 406: 3.22, 487: 2.73, 610: 2.08}},
                "2x3-1650": {302: {305: 4.75, 406: 4.07, 487: 3.62, 610: 2.92}},
                "2x3-2100": {302: {305: 5.13, 406: 4.63, 487: 4.12, 610: 3.45}},
                "2x4-2100": {302: {305: 5.70, 406: 5.08, 487: 4.40, 610: 3.62}},
                "2x4-2400": {302: {305: 5.90, 406: 5.30, 487: 4.73, 610: 3.95}}
            }
        };

        function showTab(tabName) {
            // Hide all tab contents
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => content.classList.remove('active'));
            
            // Remove active class from all tabs
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Show selected tab content
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked tab
            event.target.classList.add('active');
        }

        function updateTributaryWidths() {
            const floors = parseInt(document.getElementById('floors-i').value);
            const container = document.getElementById('tributary-widths-i');
            
            let html = '';
            for (let i = 1; i <= floors; i++) {
                html += `
                    <div class="stage-group">
                        <div class="stage-title">L.T. Étage ${i}</div>
                        <div class="dimension-input">
                            <input type="number" id="trib-${i}-ft-i" placeholder="0" min="0">
                            <span>pi</span>
                            <input type="number" id="trib-${i}-in-i" placeholder="0" min="0" max="11">
                            <span>po</span>
                        </div>
                    </div>
                `;
            }
            container.innerHTML = html;
        }

        function calculateI() {
            // Get span
            const spanFt = parseFloat(document.getElementById('span-ft-i').value) || 0;
            const spanIn = parseFloat(document.getElementById('span-in-i').value) || 0;
            const totalSpanFt = spanFt + spanIn/12;
            
            if (totalSpanFt === 0) {
                alert('Veuillez entrer une portée valide.');
                return;
            }
            
            // Simple calculation example
            document.getElementById('series-result-i').textContent = 'AJS® 25';
            document.getElementById('height-result-i').textContent = '11⅞"';
            document.getElementById('spacing-result-i').textContent = '16"';
            document.getElementById('max-span-result-i').textContent = '18\'-6"';
            document.getElementById('total-load-result-i').textContent = '55 lb/pi.ca.';
            document.getElementById('factored-load-result-i').textContent = '77 lb/pi.ca.';
        }

        function calculateAjourees() {
            // Get input values
            const spanFt = parseFloat(document.getElementById('span-ft-a').value) || 0;
            const spanIn = parseFloat(document.getElementById('span-in-a').value) || 0;
            const totalSpanM = (spanFt + spanIn/12) * 0.3048; // Convert to meters
            
            if (totalSpanM === 0) {
                alert('Veuillez entrer une portée valide.');
                return;
            }
            
            const liveLoad = document.getElementById('live-load-kpa').value;
            const deadLoad = document.getElementById('dead-load-kpa').value;
            const spacing = document.getElementById('spacing-a').value;
            
            // Use data from tables to find suitable joists
            const loadCase = `${liveLoad}_${deadLoad}`;
            const data = openWebJoistData[loadCase];
            
            if (!data) {
                alert('Combinaison de charges non trouvée dans les tables.');
                return;
            }
            
            let bestSeries = null;
            let bestHeight = null;
            let allowableSpan = 0;
            
            // Find best match
            for (const [series, heights] of Object.entries(data)) {
                for (const [height, spacings] of Object.entries(heights)) {
                    const maxSpan = spacings[spacing];
                    if (maxSpan && maxSpan >= totalSpanM && maxSpan > allowableSpan) {
                        bestSeries = series;
                        bestHeight = height;
                        allowableSpan = maxSpan;
                    }
                }
            }
            
            if (bestSeries) {
                document.getElementById('series-result-a').textContent = bestSeries;
                document.getElementById('height-result-a').textContent = `${bestHeight} mm`;
                document.getElementById('allowable-span-a').textContent = `${allowableSpan.toFixed(2)} m`;
                document.getElementById('span-ratio-a').textContent = (allowableSpan / totalSpanM).toFixed(2);
                document.getElementById('applied-loads-a').textContent = `${liveLoad} + ${deadLoad} kPa`;
                document.getElementById('status-a').textContent = allowableSpan >= totalSpanM ? 'CONFORME' : 'NON CONFORME';
            } else {
                document.getElementById('series-result-a').textContent = 'Aucune solution';
                document.getElementById('height-result-a').textContent = '-';
                document.getElementById('allowable-span-a').textContent = '-';
                document.getElementById('span-ratio-a').textContent = '-';
                document.getElementById('applied-loads-a').textContent = '-';
                document.getElementById('status-a').textContent = 'NON CONFORME';
            }
        }

        // Initialize tributary widths
        document.getElementById('floors-i').addEventListener('change', updateTributaryWidths);
        updateTributaryWidths();
    </script>
</body>
</html>
